# Changelog

## [1.1.0] - 2024-12-13

### 修复
- 修复了 Chrome 插件无法正常下载的问题
  - 添加了必要的 `downloads` 权限
  - 实现了文件保存位置选择功能
  - 修复了下载 API 的使用方式

### 改进
- 统一了 Chrome 和 Firefox 插件的功能实现
  - 统一了调试日志系统，添加了更详细的日志记录
  - 统一了错误处理机制
  - 优化了消息传递机制

### Chrome 插件更新
- 添加了 `downloads` 和 `scripting` 权限
- 使用 `chrome.downloads.download` API 实现文件下载
- 添加了 `saveAs` 选项，允许用户选择保存位置
- 优化了资源清理机制

### Firefox 插件更新
- 优化了下载实现方式，使用更可靠的传统 HTML5 下载方式
- 移除了不必要的 `downloads` 权限
- 添加了详细的调试日志
- 改进了错误处理和状态提示

### 技术细节
- Chrome 版本
  - 使用 `chrome.downloads.download` API 进行下载
  - 添加了完整的错误处理和日志记录
  - 实现了文件保存位置选择功能

- Firefox 版本
  - 使用 `Blob` 和 `URL.createObjectURL` 实现下载
  - 优化了临时资源的清理机制
  - 添加了异步操作的错误处理

### 开发者说明
- 两个版本的代码库现在更加统一，便于维护
- 添加了详细的调试日志，便于问题诊断
- 统一了错误处理方式，提供更好的用户体验

## 下一步计划
- 继续优化两个版本的共同功能
- 考虑添加更多导出格式选项
- 改进错误提示的用户体验
